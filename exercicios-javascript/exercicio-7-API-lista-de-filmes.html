<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>API - Lista de Filmes</title>
        <style>
            .titulo-filme {
                cursor:pointer; 
                margin-bottom: 10px; 
                border-bottom: 1px solid black;
                font-size: 18px;
                font-weight: 500;
                font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }

            .description {
                margin-top: 15px; 
                font-size: 16px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            
        </div>
        <script>
            fetch('https://api.themoviedb.org/3/movie/popular?api_key=506fadb0256c13349acc05dabebf9604&language=en-US&page=1', {
                method: 'GET'
            }).then(response => response.json()).then(function(json){

                let container = document.querySelector('.container');
                
                json.results.map(function(val){
                    container.innerHTML+=`
                        <div class="titulo-filme">`+val.original_title+`
                            <div class="description" style="display:none">`+val.overview+`</div>
                        </div>`;
                })

                let titulos = document.querySelectorAll('.titulo-filme'); 
                
                for (let i = 0; i < titulos.length; i++){
                    titulos[i].addEventListener('click', function(t){

                        if (t.target.querySelector('.description').style.display == "none"){
                            console.log('mostrar');
                            t.target.querySelector('.description').style.display = "block";
                        } else {
                            console.log('ocultar');
                            t.target.querySelector('.description').style.display = "none";
                        }
                    })
                }
            })
        </script>
    </body>
</html>